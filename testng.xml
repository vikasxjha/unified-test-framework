<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE suite SYSTEM "https://testng.org/testng-1.0.dtd">

<suite name="Unified Automation Test Suite"
       verbose="1"
       parallel="tests"
       thread-count="6">

    <!-- =========================================================
         GLOBAL LISTENERS
         ========================================================= -->
    <listeners>
        <!-- Unified orchestration: logs, screenshots, metrics, retries -->
        <listener class-name="com.company.qa.unified.listeners.UnifiedTestListener"/>
    </listeners>

    <!-- =========================================================
         GLOBAL PARAMETERS (Available to ALL tests)
         ========================================================= -->
    <parameter name="env" value="qa"/>
    <parameter name="browser" value="chromium"/>
    <parameter name="headless" value="true"/>
    <parameter name="runMode" value="ci"/>

    <!-- =========================================================
         1️⃣ SMOKE TESTS (FAST, BLOCKING)
         ========================================================= -->
    <test name="Smoke Tests"
          parallel="methods"
          thread-count="2">

        <groups>
            <run>
                <include name="smoke"/>
            </run>
        </groups>

        <packages>
            <package name="com.company.qa.unified.e2e"/>
        </packages>
    </test>

    <!-- =========================================================
         2️⃣ API TESTS (CORE BACKEND)
         ========================================================= -->
    <test name="API Tests"
          parallel="methods"
          thread-count="4">

        <groups>
            <run>
                <include name="api"/>
            </run>
        </groups>

        <packages>
            <package name="com.company.qa.unified.e2e"/>
            <package name="com.company.qa.unified.events"/>
        </packages>
    </test>

    <!-- =========================================================
         3️⃣ END-TO-END WEB TESTS (PLAYWRIGHT)
         ========================================================= -->
    <test name="Web E2E Tests"
          parallel="classes"
          thread-count="3">

        <groups>
            <run>
                <include name="e2e"/>
            </run>
        </groups>

        <packages>
            <package name="com.company.qa.unified.e2e"/>
        </packages>
    </test>

    <!-- =========================================================
         4️⃣ CONTRACT TESTS (PACT PROVIDER)
         ========================================================= -->
    <test name="Contract Tests"
          parallel="false">

        <groups>
            <run>
                <include name="contract"/>
            </run>
        </groups>

        <packages>
            <package name="com.company.qa.contracts"/>
        </packages>
    </test>

    <!-- =========================================================
         5️⃣ PERFORMANCE TESTS
         ========================================================= -->
    <test name="Performance Tests"
          parallel="false">

        <groups>
            <run>
                <include name="performance"/>
            </run>
        </groups>

        <packages>
            <package name="com.company.qa.unified.performance"/>
        </packages>
    </test>

    <!-- =========================================================
         6️⃣ SECURITY TESTS
         ========================================================= -->
    <test name="Security Tests"
          parallel="false">

        <groups>
            <run>
                <include name="security"/>
            </run>
        </groups>

        <packages>
            <package name="com.company.qa.unified.security"/>
        </packages>
    </test>

    <!-- =========================================================
         7️⃣ CHAOS / RESILIENCE TESTS
         ========================================================= -->
    <test name="Chaos Tests"
          parallel="false">

        <groups>
            <run>
                <include name="chaos"/>
            </run>
        </groups>

        <packages>
            <package name="com.company.qa.unified.chaos"/>
        </packages>
    </test>

</suite>
